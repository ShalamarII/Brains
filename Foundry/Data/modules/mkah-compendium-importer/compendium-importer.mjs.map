{
  "version": 3,
  "sources": ["../src/common.mjs", "../src/create-compendium.mjs", "../src/import-dialog.mjs", "../src/settings.mjs", "../src/compendium-importer.mjs"],
  "sourcesContent": ["export const CFG = {\n\tid: 'mkah-compendium-importer'\n};\n", "import { CFG } from './common.mjs';\n\n/**\n * @param {CompendiumCollection} pack\n * @param {object} json\n * @param {object} options\n * @param {boolean} options.keepId\n */\nasync function fillCompendium(pack, json, { keepId = true } = {}) {\n\tconst options = {\n\t\tpack: pack.collection,\n\t\tkeepId,\n\t};\n\n\tconst creationData = json.items.map(i => {\n\t\tconst o = i.document.toObject();\n\t\to.folder = i.json.folder;\n\t\tif (!o.folder) delete o.folder;\n\t\tif (!o._id) delete o._id; // Remove invalid ids, just in case\n\t\treturn o;\n\t});\n\n\tif (creationData.length) {\n\t\tlet chunkSize = game.settings.get(CFG.id, 'chunking');\n\t\tif (chunkSize <= 0) chunkSize = Infinity;\n\n\t\t// Split data into chunks\n\t\tconst chunks = [[]];\n\t\tfor (const entry of creationData) {\n\t\t\tconst last = chunks.at(-1);\n\t\t\tif (last.length < chunkSize)\n\t\t\t\tlast.push(entry);\n\t\t\telse\n\t\t\t\tchunks.push([entry]);\n\t\t}\n\n\t\tlet i = 1;\n\t\tfor (const chunk of chunks) {\n\t\t\tconsole.log('Creating chunk', i++, 'of', chunks.length);\n\t\t\tawait pack.documentClass.create(chunk, foundry.utils.deepClone(options));\n\t\t}\n\t}\n\n\tui.notifications.info(game.i18n.format('CompendiumImporter.FinishImport', { pack: pack.collection }));\n}\n\n/**\n * @param {CompendiumCollection} pack\n * @param {object} json\n * @param {object} options\n * @param {boolean} options.keepId\n */\nasync function setupFolders(pack, json, { keepId = true } = {}) {\n\tif (game.release.generation < 11) return;\n\n\tconst folders = json.folders ?? [];\n\tif (folders.length == 0) return;\n\n\treturn Folder.create(json.folders, { pack: pack.collection, keepId: true });\n}\n\nexport async function createCompendium(packData, json, { keepId = true } = {}) {\n\tconst createData = {\n\t\tlabel: packData.label,\n\t\ttype: json.type,\n\t};\n\n\tconst pack = await CompendiumCollection.createCompendium(createData);\n\n\tif (json.folder) {\n\t\tif (game.folders.get(json.folder))\n\t\t\tawait pack.setFolder(json.folder);\n\t\telse\n\t\t\tconsole.warn(`Folder \"${json.folder}\" not found.`);\n\t}\n\n\tconst folders = await setupFolders(pack, json, { keepId });\n\n\tawait fillCompendium(pack, json, { keepId });\n}\n", "import { CFG } from './common.mjs';\nimport { createCompendium } from './create-compendium.mjs';\n\nclass DocumentWrapper {\n\tdocument;\n\tjson;\n\tdocumentName;\n\tconstructor(data, documentName) {\n\t\tthis.documentName = documentName;\n\t\tconst docClass = CONFIG[documentName].documentClass;\n\t\tthis.document = new docClass.implementation(data);\n\t\tthis.json = data;\n\t}\n\n\tget id() {\n\t\treturn this.document.id;\n\t}\n\n\tget name() {\n\t\treturn this.json.name;\n\t}\n\n\tget img() {\n\t\treturn this.json.img;\n\t}\n\n\tget type() {\n\t\treturn this.json.type;\n\t}\n\n\tget folder() {\n\t\treturn this.json.folder;\n\t}\n}\n\nexport class ImportDialog extends FormApplication {\n\tdata = null;\n\n\tpack = null;\n\n\tconflict = false;\n\n\timportOptions = {\n\t\tkeepId: true,\n\t};\n\n\twrongSystem = false;\n\n\twrongSystemIgnore = false;\n\n\titems = new Collection();\n\tfolders = new Collection();\n\n\ttree = null;\n\n\tconstructor(json, pack, options) {\n\t\tsuper(undefined, options);\n\t\tthis.data = json;\n\t\tthis.pack = pack;\n\n\t\tfor (const item of json.items ?? [])\n\t\t\tthis.items.set(item.id, item);\n\n\t\tfor (const folder of json.folders ?? [])\n\t\t\tthis.folders.set(folder._id, { ...folder, json: folder, get id() { return this._id; }, items: [], folders: [] });\n\n\t\tthis.updateSlug();\n\t\tthis.wrongSystem = this.data.source.system !== game.system.id;\n\n\t\tthis.tree = this.buildTree();\n\t}\n\n\tupdateSlug() {\n\t\tthis.pack.slug = this.pack.label.slugify();\n\t\tconst packName = `world.${this.pack.slug}`;\n\t\tconst existing = game.packs.get(packName);\n\t\tif (existing) {\n\t\t\tconsole.warn('Pack name causes conflict with existing pack:', packName);\n\t\t}\n\t\tthis.conflict = !!existing;\n\t\treturn this.conflict;\n\t}\n\n\tget template() {\n\t\treturn `modules/${CFG.id}/template/import-dialog.hbs`;\n\t}\n\n\tstatic get defaultOptions() {\n\t\tconst options = super.defaultOptions;\n\t\treturn {\n\t\t\t...options,\n\t\t\ttitle: game.i18n.localize('CompendiumImporter.Import'),\n\t\t\t// resizable: true,\n\t\t\tclasses: [...options.classes, 'mkah-compendium-importer'],\n\t\t\tdragDrop: [{ dragSelector: '.tree .items .document' }],\n\t\t\tcloseOnSubmit: false,\n\t\t\tsubmitOnChange: true,\n\t\t\tsubmitOnClose: false,\n\t\t\theight: 'auto',\n\t\t\twidth: 540,\n\t\t};\n\t}\n\n\tbuildTree() {\n\t\tconst tree = { items: [], folders: [], lost: [] };\n\n\t\ttree.folders = this.folders.filter(f => !f.folder);\n\n\t\t// Assign items to folders\n\t\tfor (const item of this.items) {\n\t\t\tconst parent = item.folder;\n\t\t\tlet folder;\n\t\t\tif (parent && (folder = this.folders.get(parent))) {\n\t\t\t\tfolder.items.push(item);\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttree.items.push(item);\n\t\t\t}\n\t\t}\n\n\t\tconst deepFolders = this.folders.filter(f => !!f.folder);\n\n\t\t// Assign folders to folders\n\t\tfor (const folder of deepFolders) {\n\t\t\tconst parent = folder.folder;\n\t\t\tlet pfolder;\n\t\t\tif (parent && (pfolder = this.folders.get(parent))) {\n\t\t\t\tpfolder.folders.push(folder);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfolder.lost = true;\n\t\t\t\ttree.lost.push(folder);\n\t\t\t}\n\t\t}\n\n\t\treturn tree;\n\t}\n\n\tgetData() {\n\t\tconst data = super.getData();\n\t\tdata.metadata = this.data?.metadata;\n\t\tdata.data = this.data;\n\t\tdata.ready = true;\n\t\tdata.pack = this.pack;\n\n\t\tdata.items = this.items;\n\t\tdata.folder = this.data?.folder;\n\t\tdata.folders = this.folders;\n\n\t\tdata.tree = this.tree;\n\n\t\tdata.keepId = this.importOptions.keepId;\n\t\tdata.nameConflict = this.conflict;\n\t\tdata.wrongSystem = this.wrongSystem;\n\t\tdata.ignoreSystem = this.wrongSystemIgnore;\n\t\tdata.disableSubmit = this.conflict || this.wrongSystem && !this.wrongSystemIgnore;\n\t\treturn data;\n\t}\n\n\t_canDragStart(selector) {\n\t\treturn true;\n\t}\n\n\t/**\n\t * @param {DragEvent} event\n\t */\n\t_onDragStart(event) {\n\t\tconst el = event.currentTarget;\n\t\tconst { documentId, documentKind, documentType } = el.dataset;\n\t\tconst doc = this.data.items.find(i => i.id === documentId);\n\n\t\tconst dragData = { data: deepClone(doc.json), type: documentKind };\n\t\tif (game.release.generation < 11) {\n\t\t\t// In v10 dropping to sidebar simply does not work if the ID is left in place\n\t\t\tdelete dragData.data._id;\n\t\t}\n\t\tevent.dataTransfer.setData('text/plain', JSON.stringify(dragData));\n\t}\n\n\t_updateObject(event, data) {\n\t\tthis.pack.label = data.label;\n\t\tthis.importOptions.keepId = data.keepId;\n\t\tthis.wrongSystemIgnore = data.ignoreSystem;\n\t\tthis.updateSlug();\n\t\tthis.render();\n\t}\n\n\tactivateListeners(html) {\n\t\tsuper.activateListeners(html);\n\n\t\thtml[0].querySelector('button.submit').addEventListener('click', this._createCompendium.bind(this));\n\t}\n\n\tasync _createCompendium(ev) {\n\t\tev.preventDefault();\n\t\tev.stopPropagation();\n\n\t\tev.target.disabled = true;\n\n\t\tcreateCompendium(this.pack, this.data, this.importOptions);\n\n\t\tthis.close();\n\t}\n\n\tstatic async fromJSON(data, options) {\n\t\tlet valid = true, json = null;\n\n\t\ttry {\n\t\t\tjson = JSON.parse(data);\n\t\t}\n\t\tcatch (err) {\n\t\t\tui.notifications.error(err.message, { console: false });\n\t\t\tconsole.error(err);\n\t\t\tvalid = false;\n\t\t\treturn;\n\t\t}\n\n\t\t// Basic validation\n\t\tif (!Array.isArray(json.items)) valid = false;\n\t\tif (!json.metadata) valid = false;\n\n\t\tconst docClass = CONFIG[json.type].documentClass;\n\t\tif (!docClass) {\n\t\t\tui.notifications.error(`${json.type} is invalid document class`);\n\t\t\tvalid = false;\n\t\t}\n\n\t\tif (!valid) return void ui.notifications.error(game.i18n.localize('CompendiumImporter.BadDataImport'));\n\n\t\tjson.items = json.items.map(docData => {\n\t\t\ttry {\n\t\t\t\treturn new DocumentWrapper(docData, json.type);\n\t\t\t}\n\t\t\tcatch (err) {\n\t\t\t\tconsole.error(err);\n\t\t\t}\n\t\t\treturn null;\n\t\t}).filter(i => !!i);\n\n\t\tconst pack = {\n\t\t\tlabel: json.metadata.label,\n\t\t\tid: json.metadata.name,\n\t\t\ttype: json.metadata.entity ?? json.metadata.type,\n\t\t};\n\n\t\tnew ImportDialog(json, pack, options).render(true, { focus: true });\n\t}\n}\n", "import { CFG } from './common.mjs';\n\nHooks.once('init', () => {\n\tgame.settings.register(CFG.id, 'chunking', {\n\t\tname: 'CompendiumImporter.Settings.Chunking',\n\t\thint: 'CompendiumImporter.Settings.ChunkingHint',\n\t\ttype: Number,\n\t\tdefault: 0,\n\t\trange: {\n\t\t\tmin: 0,\n\t\t\tstep: 100,\n\t\t\tmax: 1000,\n\t\t},\n\t\tconfig: true,\n\t\tscope: 'client'\n\t});\n});\n", "import { CFG } from './common.mjs';\nimport { ImportDialog } from './import-dialog.mjs';\nimport './settings.mjs';\n\nfunction exportDocument(doc) {\n\tconst obj = doc.toCompendium(); // .toCompendium() is used for exporting by core Foundry\n\tobj._id = doc.id; // preserve ID\n\treturn obj;\n}\n\nasync function exportCompendium(li) {\n\tconst packId = li.get(0).dataset.pack;\n\tconst pack = game.packs.get(packId);\n\n\tif (!pack)\n\t\treturn void ui.notifications.warn(game.i18n.format('CompendiumImporter.PackNotFound', { pack: packId }));\n\n\tui.notifications.info(game.i18n.format('CompendiumImporter.StartExport', { pack: packId, count: pack.index.contents.length }));\n\n\tconst data = {\n\t\tpackage: pack.collection, // `${metadata.package}.${metadata.name}`\n\t\tmetadata: duplicate(pack.metadata),\n\t\ttype: pack.documentName,\n\t\titems: [],\n\t\tsource: {\n\t\t\tworld: game.world.id,\n\t\t\tsystem: game.system.id,\n\t\t\tversion: {\n\t\t\t\tcore: game.version,\n\t\t\t\tsystem: game.system.version,\n\t\t\t},\n\t\t},\n\t};\n\n\tconst items = await pack.getDocuments();\n\tdata.items.push(...items.map(exportDocument));\n\n\tif (game.release.generation >= 11) {\n\t\tdata.folders = pack.folders.map(exportDocument);\n\t\tif (pack.folder) {\n\t\t\tdata.folder = { id: pack.folder.id, name: pack.folder.name };\n\t\t}\n\t}\n\n\tconst filename = `fvtt-${data.type}-pack-${game.system.id}-${pack.metadata.name}.json`;\n\n\tui.notifications.info(game.i18n.format('CompendiumImporter.FinishExport', { pack: packId }));\n\n\t/* global saveDataToFile */\n\tsaveDataToFile(JSON.stringify(data, null, 2), 'text/json', filename);\n}\n\n/**\n * Foundry v12 and newer\n *\n * @param {DocumentDirectory} html\n * @param app\n * @param {object[]} entries\n */\nfunction insertExportMenuItem(app, entries) {\n\tconst exportEntry = {\n\t\tname: 'CompendiumImporter.Export',\n\t\ticon: '<i class=\"fas fa-file-export\"></i>',\n\t\tcallback: exportCompendium,\n\t};\n\tentries.push(exportEntry);\n}\n\n/**\n * Foundry v11 and older\n *\n * @param {JQuery} html\n * @param {object[]} entries\n */\nfunction insertExportMenuItemV11([html], entries) {\n\tconst exportEntry = {\n\t\tname: 'CompendiumImporter.Export',\n\t\ticon: '<i class=\"fas fa-file-export\"></i>',\n\t\tcallback: exportCompendium,\n\t};\n\tentries.push(exportEntry);\n}\n\n/**\n * @param {CompendiumDirectory} cc\n * @param {JQuery} html\n * @param {object} opts\n */\nfunction insertImportButton(cc, [html], opts) {\n\tif (!game.user.isGM) return;\n\n\tconst buttons = html.querySelector('header .action-buttons');\n\tconst btn = document.createElement('button');\n\tif (game.release.generation >= 11) btn.classList.add('ic-wide');\n\tbtn.classList.add('import-compendium');\n\tbtn.type = 'button';\n\tbtn.innerHTML = `<i class=\"fa-solid fa-upload\"></i> ${game.i18n.localize('CompendiumImporter.ImportShort')}`;\n\tbuttons.append(btn);\n\tbtn.addEventListener('click', (ev) => {\n\t\tev.preventDefault();\n\t\tev.stopPropagation();\n\n\t\tconst options = { left: window.innerWidth - 620, top: this.offsetTop + 20 };\n\n\t\tconst fileRead = document.createElement('input');\n\t\tfileRead.type = 'file';\n\t\tfileRead.accept = 'application/json';\n\t\tfileRead.enctype = 'multipart/form-data';\n\n\t\tfileRead.addEventListener('change', function readFile(evt) {\n\t\t\tconst files = evt.target.files,\n\t\t\t\treader = new FileReader();\n\n\t\t\treader.onload = (event) => {\n\t\t\t\toptions.left = window.innerWidth - 860;\n\t\t\t\tImportDialog.fromJSON(event.target?.result, options);\n\t\t\t};\n\n\t\t\tfor (const file of files)\n\t\t\t\treader.readAsText(file);\n\t\t}, { passive: true, once: true });\n\n\t\tfileRead.click();\n\t});\n}\n\nHooks.once('init', () => {\n\tif (game.release.generation >= 12)\n\t\tHooks.on('getCompendiumDirectoryEntryContext', insertExportMenuItem);\n\telse\n\t\tHooks.on('getCompendiumDirectoryEntryContext', insertExportMenuItemV11);\n});\n\nHooks.on('renderCompendiumDirectory', insertImportButton);\n"],
  "mappings": "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",
  "names": ["CFG", "fillCompendium", "pack", "json", "keepId", "options", "creationData", "i", "o", "chunkSize", "CFG", "chunks", "entry", "last", "chunk", "__name", "setupFolders", "createCompendium", "packData", "createData", "folders", "DocumentWrapper", "__name", "data", "documentName", "docClass", "ImportDialog", "_ImportDialog", "json", "pack", "options", "item", "folder", "packName", "existing", "CFG", "tree", "f", "parent", "deepFolders", "pfolder", "selector", "event", "el", "documentId", "documentKind", "documentType", "doc", "i", "dragData", "html", "ev", "createCompendium", "valid", "err", "docData", "CFG", "exportDocument", "doc", "obj", "__name", "exportCompendium", "li", "packId", "pack", "data", "items", "filename", "insertExportMenuItem", "app", "entries", "exportEntry", "insertExportMenuItemV11", "html", "insertImportButton", "cc", "opts", "buttons", "btn", "ev", "options", "fileRead", "evt", "files", "reader", "event", "ImportDialog", "file"]
}
